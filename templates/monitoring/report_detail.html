{% extends "base.html" %}
{% block title %}Chi ti·∫øt b√°o c√°o{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="card shadow-lg border-0">
        <!-- Header -->
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
            <h4 class="mb-0">{{ report.title }}</h4>
            <a href="{% url 'report_list' %}" class="btn btn-light btn-sm">‚¨Ö Quay l·∫°i</a>
        </div>

        <!-- Body -->
        <div class="card-body">
            <!-- Th√¥ng tin ch√≠nh -->
            <p>
                <span class="fw-bold">Lo·∫°i:</span>
                <span class="badge bg-secondary">{{ report.get_report_type_display }}</span>
            </p>

            <p class="mb-1"><span class="fw-bold">Ng∆∞·ªùi t·∫°o:</span> {{ report.created_by }}</p>
            <p class="mb-1"><span class="fw-bold">Ng∆∞·ªùi nh·∫≠n:</span> {{ report.recipient }}</p>
            <p class="mb-1"><span class="fw-bold">Thi·∫øt b·ªã:</span> {{ report.device }}</p>

            <hr>

            <!-- N·ªôi dung -->
            <h5 class="fw-bold">üìÑ N·ªôi dung</h5>
            <div class="p-3 border rounded bg-light">
                {{ report.content|linebreaks }}
            </div>

            <!-- Readings -->
            {% if report.readings.all %}
                <h5 class="mt-4 fw-bold">üìä Readings</h5>
                <ul class="list-group">
                    {% for r in report.readings.all %}
                        <li class="list-group-item">{{ r }}</li>
                    {% endfor %}
                </ul>
            {% endif %}

            <!-- Forecasts -->
            {% if report.forecasts.all %}
                <h5 class="mt-4 fw-bold">üå¶ Forecasts</h5>
                <ul class="list-group">
                    {% for f in report.forecasts.all %}
                        <li class="list-group-item">{{ f }}</li>
                    {% endfor %}
                </ul>
            {% endif %}

            <hr>

            <!-- Tr·∫°ng th√°i -->
            <p>
                <span class="fw-bold">Tr·∫°ng th√°i:</span>
                {% if report.status == "draft" %}
                    <span class="badge bg-warning text-dark">B·∫£n nh√°p</span>
                {% elif report.status == "published" %}
                    <span class="badge bg-success">ƒê√£ xu·∫•t b·∫£n</span>
                {% else %}
                    <span class="badge bg-info">Kh√°c</span>
                {% endif %}
            </p>

            <p class="text-muted">
                üïí T·∫°o l√∫c {{ report.created_at|date:"d/m/Y H:i" }}
                {% if report.sent_at %} | üì§ G·ª≠i l√∫c {{ report.sent_at|date:"d/m/Y H:i" }}{% endif %}
            </p>
        </div>
    </div>
</div>
{% endblock %}
